(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),o=t.n(r),a=t(15),i=t.n(a),u=(t(21),t(6)),s=t(3),d=t(4),l=t.n(d),j="/api/persons",h=function(){return l.a.get(j).then((function(e){return e.data}))},b=function(e){return l.a.post(j,e).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return l.a.put("".concat(j,"/").concat(e),n)},O=(t(40),function(e){var n=e.message,t=e.type;if(!n)return null;var r="error"===t?"error":"success";return Object(c.jsx)("div",{className:r,children:n})}),p=function(e){var n=e.handleFilterChange;return Object(c.jsxs)("div",{children:["Filter shown with",Object(c.jsx)("input",{type:"text",onChange:n})]})},v=function(e){var n=e.addPerson,t=e.handleNameChange,r=e.handlePhoneChange;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:t})]}),Object(c.jsxs)("div",{children:["phone: ",Object(c.jsx)("input",{onChange:r})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},x=function(e){var n=e.persons,t=e.filterValue,r=e.removePerson,o=n.filter((function(e){return-1!==e.name.toUpperCase().indexOf(t.toUpperCase())}));return Object(c.jsx)("div",{children:o.map((function(e){return Object(c.jsx)(g,{person:e,removePerson:r},e.id)}))})},g=function(e){var n=e.person,t=e.removePerson;return Object(c.jsxs)("p",{children:[n.name," ",n.number,Object(c.jsx)("button",{onClick:function(){return t(n)},children:"remove"})]})},C=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),i=Object(s.a)(a,2),d=i[0],l=i[1],j=Object(r.useState)(""),g=Object(s.a)(j,2),C=g[0],w=g[1],P=Object(r.useState)(""),S=Object(s.a)(P,2),y=S[0],k=S[1],F=Object(r.useState)(""),N=Object(s.a)(F,2),T=N[0],E=N[1],U=Object(r.useState)(""),A=Object(s.a)(U,2),D=A[0],J=A[1];Object(r.useEffect)((function(){h().then((function(e){o(e)}))}),[]);var V=function(e){if(window.confirm("".concat(d," is already added to phonebook, replace the \n                                       old number with a new one?"))){var n=Object(u.a)(Object(u.a)({},e),{},{number:C});m(n.id,n).then((function(e){console.log(e),E("Updated ".concat(n.name)),J("success"),setTimeout((function(){E(null)}),5e3)})).catch((function(e){console.log("Error",e),E("".concat(n.name," has already been removed from server")),J("error"),setTimeout((function(){E(null)}),5e3)}));var c=t.filter((function(e){return e.id!==n.id}));o(c.concat(n))}};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(O,{message:T,type:D}),Object(c.jsx)(p,{handleFilterChange:function(e){k(e.target.value)}}),Object(c.jsx)("h2",{children:"Add new"}),Object(c.jsx)(v,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));n?V(n):b({name:d,number:C}).then((function(e){console.log(e),o(t.concat(e)),E("Added ".concat(e.name)),J("success"),setTimeout((function(){E(null)}),5e3)}))},handleNameChange:function(e){l(e.target.value)},handlePhoneChange:function(e){w(e.target.value)}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(x,{persons:t,filterValue:y,removePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(f(e.id).then((function(n){E("Removed ".concat(e.name)),J("success"),setTimeout((function(){E(null)}),5e3)})),o(t.filter((function(n){return n.id!==e.id}))))}})]})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(C,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.68268ed6.chunk.js.map